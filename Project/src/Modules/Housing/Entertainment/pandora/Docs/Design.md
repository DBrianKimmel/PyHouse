* Name:      PyHouse/Project/src/Modules/Housing/Entertainment/pandora/Docs/Design
* Author:    D. Brian Kimmel
* Contact:   D.BrianKimmel@gmail.com
* Copyright: (c) 2018-2018 by D. Brian Kimmel
* Created:   2018-09-30
* Updated:   2018-10-04
* License:   MIT License
* Summary:   This is the design documentation for the Pandora Module of PyHouse.


# Pandora


## Design

The pandora module will use pianobar to receive a stream from the pandora servers.
The computer running this may be connected to one or more A/V devices to play the music somewhere in the house.

This module receives a Mqtt control message to allow people to control the music.
Therefore it is responsible for issuing Mqtt control messages to various A/V PyHouse modules to control the sound.
This module also receives the play an information and sends a Mqtt message to allow the person
know what is going on.

Pandora sometimes needs a new key.
This is generated by ????


### Control Message

The pandora module will recieve a control message and perform the action:
The computer where 'PianoBar' is installed should be the one where the pandora service is configured.
These messages have topics that begin with:
		pyhouse/house name/entertainment/pandora/<action>
	where <action> is control, status

.../control msg=on will have side effects of turning on and setting the "ConnectionName" device.

### Status Message

pyhouse/house name/entertainment/pandora/status  <Payload>


## XML / Configuration

** The pandora device should only be configured on computers where PianoBar is installed. **

<PandoraSection Active="True">
    <Type>Service</Type>
    <Device Active="True" Key="0" Name="Running on pi-06-ct ">
        <Comment>Living Room</Comment>
        <Host>192.168.9.16</Host>
        <Type>Service</Type>
        <ConnectionFamily>pioneer</ConnectionFamily>
        <ConnectionName>822-k</ConnectionName>
        <InputName>CD</InputName>
        <InputCode>01FN</InputCode>
        <Volume>47</Volume>
    </Device>
</PandoraSection>

Host is the IP address of the computer running PyHouse and PianoBar.
Type is always Service.
ConnectionFamily must match one of the Entertainment modules that are programmed and must be lower case.
ConnectionName must match one of the devices in the family and also must be lower case.
InputName is the name of the connection on the family device where the cable from the pandora computer is plugged in.
InputCode is the code that must be sent to the family-device to cause the device to select that input channel.
Volume is a precent of full volume to be selected when first connecting.


## Now Playing

format of now-playing song = "%t" by "%a" on "%l"%r%@%s
Now playing song message format. Available format characters are:
# %t Song title
# %a Song artist
# %l Album name
# %r Rating icon (only love icon)
# %@ at_icon if station is quickmix, empty otherwise.
# %s Real station name if quickmix
# %u Song detail url


### END DBK
